ServerName OneEarth_Test_Server

LoadModule onearth_module modules/mod_onearth.so
LoadModule oetwms_module modules/mod_oetwms.so
LoadModule oems_module modules/mod_oems.so
LoadModule oemstime_module modules/mod_oemstime.so

LimitInternalRecursion 20

# Endpoint Setup
Alias /onearth/test/wmts {cache_path}/wmts_endpoint
Alias /onearth/test/twms {cache_path}/twms_endpoint
ScriptAlias /onearth/test/wms {cache_path}/wms_endpoint
ScriptAlias /onearth/test/wfs {cache_path}/wfs_endpoint

# Apache 2.4 hack
<IfModule mod_authz_core.c>
<Directory {cache_path}>
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
    Allow from all
</Directory>
</IfModule>

# Endpoint Setup - CGI permissions and cache location for each endpoint
<Directory {cache_path}/wmts_endpoint>
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
    AddHandler cgi-script .cgi
    WMSCache {cache_path}/test_imagery/cache_all_wmts.config
</Directory>

<Directory {cache_path}/twms_endpoint>
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
    AddHandler cgi-script .cgi
    TWMSDirConfig .lib/getTileService.xml
    WMSCache {cache_path}/test_imagery/cache_all_twms.config
</Directory>

<Directory "{cache_path}/wms_endpoint">
    MapfileDir {cache_path}/
    DefaultMapfile epsg4326.map
    TWMSServiceURL /onearth/test/twms/twms.cgi
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
    AddHandler cgi-script .cgi
</Directory>

<Directory "{cache_path}/wfs_endpoint">
    MapfileDir {cache_path}/
    DefaultMapfile epsg4326.map
    TWMSServiceURL /onearth/test/twms/twms.cgi
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
    AddHandler cgi-script .cgi
</Directory>